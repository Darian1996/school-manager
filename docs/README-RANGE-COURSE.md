

### 算法优化问题，不需要优化，大部分时间都花费在了数据库连接上，所以不需要优化 

#### 耗时问题

- 当采用阿里云的数据库 , 总计 595s ，大约 10 分钟

```shell script
00:23:16.371  [main] INFO  RANGE_COURSE - [RangeCourseService.matchAllCourseId][308ms][true]
...
00:51:15.542  [main] INFO  RANGE_COURSE - [RangeCourseService.rangeCourseLogAll][595473ms][true]
```

- 当采用本地的数据库 ，总计 25 s

```shell script
00:37:34.451  [main] INFO  RANGE_COURSE - [RangeCourseService.matchAllCourseId][10ms][true]
...
00:37:41.228  [main] INFO  RANGE_COURSE - [RangeCourseService.rangeCourseLogAll][25762ms][true]
```

##### 2020-10-13

-Xss2g
```
9055	54	1	1	星期一	1	1	-1	1	1	-1	2	2	3	-1
9056	54	1	2	星期二	3	3	-1	3	3	-1	3	4	4	-1
9057	54	1	3	星期三	4	4	-1	4	7	-1	7	8	8	-1
9058	54	1	4	星期四	9	9	-1	10	10	-1	11	14	16	-1
9059	54	1	5	星期五	15	16	-1	16	12	-1	13	13		
9060	54	2	1	星期一										
```
-Xss8g
```
9280	55	1	1	星期一	1	1	-1	1	1	-1	2	2	3	-1
9281	55	1	2	星期二	3	3	-1	3	3	-1	3	4	4	-1
9282	55	1	3	星期三	4	4	-1	4	7	-1	7	8	8	-1
9283	55	1	4	星期四	9	9	-1	10	10	-1	11	14	16	-1
9284	55	1	5	星期五	15	16	-1	16	12	-1	12	17		
```

- 最后内存栈溢出进行了 运算次数如下：3.5 E 24

```
2*2*3
*3*3*3*3*3*4*4
*4*4*4*7*7*8*8
*9*9*10*10*11*14*16
*15*16*16*12*12*17
```
- 总体算法：17 次方 （46 * 35） = 17 次方（1610） = 1.05 E 981

- 剪枝算法以后，
  - 每个班级的 35 节课固定 每个班级一共 组合有 35 * 34 / 2 = 35 * 17 = 595
  - 算法复杂度：595 次方（46）=  4.2 E 127 最坏打算

- 当算法不断完善的话，可能没有那么多种可能，在某些 算法直接进行了回滚，类似于剪枝的效果。



##### 2020-10-14

-  `-Xss8g`

```

15580	83	1	1	星期一	1	1	-1	1	2	-1	2	7	7	-1
15581	83	1	2	星期二	1	3	-1	3	8	-1	8	9	9	-1
15582	83	1	3	星期三	3	3	-1	3	10	-1	10	11	12	-1
15583	83	1	4	星期四	3	4	-1	4	13	-1	14	15	16	-1
15584	83	1	5	星期五	4	4	-1	4	16	-1	16	17	17	-1
15585	83	2	1	星期一	1	1	-1	1	2	-1	2	7	7	-1
15586	83	2	2	星期二	1	3	-1	3	8	-1	8	9	9	-1
15587	83	2	3	星期三	3	3	-1	3	10	-1	10	11	12	-1
15588	83	2	4	星期四	3	4	-1	4	13	-1	14	15	16	-1
15589	83	2	5	星期五	4	4	-1	4	16	-1	16	17	17	-1
15590	83	3	1	星期一	1	1	-1	1	2	-1	2	5	5	-1
15591	83	3	2	星期二	1	3	-1	3	5	-1	5	7	7	-1
15592	83	3	3	星期三	3	3	-1	3	8	-1	8	9	9	-1
15593	83	3	4	星期四	3	4	-1	4	10	-1	10	11	12	-1
15594	83	3	5	星期五	4	4	-1	4	13	-1	16	16	16	-1
15595	83	4	1	星期一	1	1	-1	1	2	-1	2	5	5	-1
15596	83	4	2	星期二	1	3	-1	3	5	-1	5	6	6	-1
15597	83	4	3	星期三	3	3	-1	3	6	-1	6	8	8	-1
15598	83	4	4	星期四	3	4	-1	4	9	-1	17	16	16	-1
15599	83	4	5	星期五	16	4	-1	17	9	-1	4	4	4	

```


- `-Xmx2g -Xms2g -Xmn2g -Xss2g -Dspring.profiles.active=local` 

###  思路解决办法

- 如果要解决栈溢出的问题，从思路分析上来说，是 递归回溯的问题
  - 那么换个思路，从递归回溯，换成一个 ` while( 条件 )` 自旋来解决这个问题 ，可以避免递归调用的问题。